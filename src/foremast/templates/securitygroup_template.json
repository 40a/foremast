{
    "application": "{{ app }}",
    "description": "Create Security Group: {{ app }}",
    "job": [
        {
            "credentials": "{{ env }}",
            "description": "Security group for {{ app }}",
            "detail": "",
            "name": "{{ app }}",
            "regions": [
                "{{ region }}"
            ],
            "securityGroupIngress": [
                {% for rule in ingress %}
                {
                    "name": "{{ rule.app }}",
                    "type": "{{ rule.protocol }}",
                    "startPort": {{ rule.port }},
                    "endPort": {{ rule.port }}
                }{% if not loop.last %},{% endif %}
                {% endfor %}
            ],
            "subnet": "none",
            "type": "upsertSecurityGroup",
            "user": "pipes-securitygroup",
            "vpcId": "{{ vpc }}"
        }
    ]
}
